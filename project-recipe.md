

# ูพุฑูฺู ูุจโุงูพูฺฉุดู ูุฏุฑุช ูุฏุฑุณู

## ูุฏู ูพุฑูฺู
ุงุฌุงุฏ ฺฉ ุณุณุชู ูุฏุฑุช ูุฏุฑุณู ุจุฑุง ุซุจุช ููุฑุงุช ุฏุงูุดโุขููุฒุงู ู ูุดุงูุฏู ุขู ุชูุณุท ูุงูุฏู

## ููุดโูุง โ
- **ูุฏุฑ**: ูุฏุฑุช ฺฉูุงุณโูุงุ ุฏุฑูุณุ ุฏุงูุดโุขููุฒุงู ู ุซุจุช ููุฑุงุช โ
- **ูุงูุฏ**: ูุดุงูุฏู ููุฑุงุช ูุฑุฒูุฏ โ

## ุชฺฉููููฺโูุง โ
- **Frontend**: Next.js 15 + TypeScript + TailwindCSS โ
- **Backend**: Supabase (PostgreSQL + Auth + RLS) โ
- **UI**: RTL Support + Persian Fonts โ
- **Validation**: Zod + React Hook Form โ

---

## ๐ฅ ููุดโูุง (Roles)

### 1. ูุฏุฑ (Admin)

* ุงูุฒูุฏู ฺฉูุงุณโูุง (ูุซูุงู "ุฏูู ุชุฌุฑุจ ฑ")
* ุชุนุฑู ุฏุฑูุณ (ูุซูุงู "ุฑุงุถ ฑ") ู ุชุฎุตุต ุขูโูุง ุจู ฺฉ ุง ฺูุฏ ฺฉูุงุณ
* ุงูุฒูุฏู ุฏุงูุดโุขููุฒ (ุจุง ุงุทูุงุนุงุช ุฏุงูุดโุขููุฒ ู ูุงูุฏ)
* ููฺฏุงู ุงูุฒูุฏู ุฏุงูุดโุขููุฒุ ฺฉ ฺฉุงุฑุจุฑ ุจุฑุง ูุงูุฏ ุฏุฑ Supabase ุงุฌุงุฏ ูโุดูุฏ:

  * `username` = ฺฉุฏ ูู ุฏุงูุดโุขููุฒ
  * `password` = ุดูุงุฑู ุชููู ูุงูุฏ
* ูุงุฑุฏ ฺฉุฑุฏู ููุฑุงุช ูุงูุงูู ุจุฑุง ูุฑ ุฏุงูุดโุขููุฒ ุฏุฑ ูุฑ ุฏุฑุณ
  (ูุงูโูุง ุณุงู ุชุญุตู ุงุฒ ููุฑ ุชุง ุฎุฑุฏุงุฏ)

### 2. ูุงูุฏ (Parent)

* ูุฑูุฏ ุจุง ูุงู ฺฉุงุฑุจุฑ ู ุฑูุฒ ุนุจูุฑ ุชุนูโุดุฏู ุชูุณุท ูุฏุฑ
* ูุดุงูุฏูู ุฌุฏูู ููุฑุงุช ูุฑุฒูุฏุด (ููุท Read-only)
* ุฌุฏูู ุดุงูู ุฏุฑูุณ ุฏุฑ ุณุทุฑูุง ู ูุงูโูุง ููุฑ ุชุง ุฎุฑุฏุงุฏ ุฏุฑ ุณุชููโูุง ุงุณุช
* ุขุฎุฑู ุณุชูู ูุนุฏู ฺฉู ูุฑ ุฏุฑุณ ุฑุง ููุงุด ูโุฏูุฏ

---

## โ๏ธ ุชฺฉููููฺโูุง ู ุงุจุฒุงุฑูุง

| ุจุฎุด        | ุงุจุฒุงุฑ                              |
| ---------- | ---------------------------------- |
| Frontend   | Next.js 14 (App Router)            |
| Database   | PostgreSQL (ุฏุฑ Supabase)           |
| Auth       | Supabase Auth                      |
| Styling    | TailwindCSS (ุจุง ูพุดุชุจุงู RTL)      |
| Forms      | React Hook Form                    |
| Validation | Zod (ุฏุฑ ุตูุฑุช ูุงุฒ)                 |
| Deployment | Vercel (Frontend) + Supabase Cloud |

---

## ุณุงุฎุชุงุฑ ุฏุชุงุจุณ โ

### ุฌุฏุงูู ุงุตู โ

#### 1. ุฌุฏูู ฺฉูุงุณโูุง (classes) โ
```sql
CREATE TABLE classes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL UNIQUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 2. ุฌุฏูู ุฏุฑูุณ (subjects) โ
```sql
CREATE TABLE subjects (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    name VARCHAR(100) NOT NULL UNIQUE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 3. ุฌุฏูู ุงุฑุชุจุงุท ุฏุฑูุณ ู ฺฉูุงุณโูุง (subject_classes) โ
```sql
CREATE TABLE subject_classes (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    subject_id UUID REFERENCES subjects(id) ON DELETE CASCADE,
    class_id UUID REFERENCES classes(id) ON DELETE CASCADE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(subject_id, class_id)
);
```

#### 4. ุฌุฏูู ูุงูุฏู (parents) โ
```sql
CREATE TABLE parents (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    full_name VARCHAR(100) NOT NULL,
    phone VARCHAR(11) NOT NULL UNIQUE,
    national_id VARCHAR(10) NOT NULL UNIQUE,
    auth_user_id UUID REFERENCES auth.users(id) ON DELETE SET NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 5. ุฌุฏูู ุฏุงูุดโุขููุฒุงู (students) โ
```sql
CREATE TABLE students (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    full_name VARCHAR(100) NOT NULL,
    national_id VARCHAR(10) NOT NULL UNIQUE,
    parent_id UUID REFERENCES parents(id) ON DELETE CASCADE,
    class_id UUID REFERENCES classes(id) ON DELETE SET NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

#### 6. ุฌุฏูู ููุฑุงุช (grades) โ
```sql
CREATE TABLE grades (
    id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    student_id UUID REFERENCES students(id) ON DELETE CASCADE,
    subject_id UUID REFERENCES subjects(id) ON DELETE CASCADE,
    month INTEGER CHECK (month >= 1 AND month <= 12),
    school_year INTEGER NOT NULL,
    score DECIMAL(4,2) CHECK (score >= 0 AND score <= 20),
    created_by UUID REFERENCES auth.users(id),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW(),
    UNIQUE(student_id, subject_id, month, school_year)
);
```

---

## ุฑูุงุจุท ุจู ุฌุฏุงูู โ

- **classes** โ **students** (ฺฉ ฺฉูุงุณุ ฺูุฏู ุฏุงูุดโุขููุฒ) โ
- **parents** โ **students** (ฺฉ ูุงูุฏุ ฺูุฏู ูุฑุฒูุฏ) โ
- **students** โ **grades** (ฺฉ ุฏุงูุดโุขููุฒุ ฺูุฏู ููุฑู) โ
- **subjects** โ **grades** (ฺฉ ุฏุฑุณุ ฺูุฏู ููุฑู) โ
- **subjects** โ **classes** (ุฑุงุจุทู many-to-many ุงุฒ ุทุฑู subject_classes) โ

---

## ูุงุฒุจูุฏ ูพุฑูฺู โ

### ูุงุฒ ฑ: ุฒุฑุณุงุฎุช โ
- [x] ุฑุงูโุงูุฏุงุฒ Next.js ุจุง TypeScript โ
- [x] ูพฺฉุฑุจูุฏ TailwindCSS ุจุฑุง RTL โ
- [x] ุงุชุตุงู ุจู Supabase โ
- [x] ุงุฌุงุฏ ุฌุฏุงูู ุฏุชุงุจุณ โ
- [x] ุชูุธู RLS (Row Level Security) โ

### ูุงุฒ ฒ: ูุฏุฑุช ฺฉูุงุณโูุง ู ุฏุฑูุณ โ
- [x] CRUD ฺฉูุงุณโูุง โ
- [x] CRUD ุฏุฑูุณ โ
- [x] ุชุฎุตุต ุฏุฑูุณ ุจู ฺฉูุงุณโูุง โ

### ูุงุฒ ณ: ูุฏุฑุช ุฏุงูุดโุขููุฒุงู ู ูุงูุฏู โ
- [x] CRUD ุฏุงูุดโุขููุฒุงู โ
- [x] ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ูุงูุฏู ููฺฏุงู ุซุจุช ุฏุงูุดโุขููุฒ โ
- [x] ุชุฎุตุต ุฏุงูุดโุขููุฒุงู ุจู ฺฉูุงุณโูุง โ

### ูุงุฒ ด: ุซุจุช ููุฑุงุช โ
- [x] ูุฑู ุซุจุช ููุฑุงุช ูุงูุงูู โ
- [x] ูุฑุงุด ู ุญุฐู ููุฑุงุช โ
- [x] ููุชุฑ ุจุฑ ุงุณุงุณ ฺฉูุงุณ ู ุฏุฑุณ โ

### ูุงุฒ ต: ูพูู ูุงูุฏ โ
- [x] ุตูุญู ูุฑูุฏ ูุงูุฏู (ฺฉุฏ ูู + ุดูุงุฑู ุชููู) โ
- [x] ุฏุงุดุจูุฑุฏ ูุงูุฏ โ
- [x] ูุดุงูุฏู ููุฑุงุช ูุฑุฒูุฏ โ
- [x] ูุญุงุณุจู ูุนุฏู ูุงูุงูู ู ฺฉู โ

### ูุงุฒ ถ: ุงููุช ู ุฏูพูู
- [ ] ุชูุธู ฺฉุงูู RLS policies
- [ ] ุงุถุงูู ฺฉุฑุฏู authentication ุจุฑุง admin
- [ ] ุจูููโุณุงุฒ performance
- [ ] ุชุณุช ฺฉุงูู ุณุณุชู
- [ ] ุขูุงุฏูโุณุงุฒ ุจุฑุง production

---

## ุฏุณุชูุฑุงูุนูู ุงุชุตุงู ุจู Supabase โ

### ูุฑุงุญู ุฑุงูโุงูุฏุงุฒ โ
1. **ุงุฌุงุฏ ูพุฑูฺู ุฏุฑ Supabase** โ
2. **ฺฉูพ ฺฉุฑุฏู URL ู API Key** โ
3. **ุชูุธู ูุชุบุฑูุง ูุญุท ุฏุฑ `.env.local`** โ
4. **ุงุฌุฑุง migration ูุง** โ
5. **ุชูุธู RLS policies** โ

### ุงุทูุงุนุงุช ุงุชุตุงู โ
- **Project URL**: `https://hprzgndndgcmwyrosmlx.supabase.co` โ
- **Anon Key**: ุชูุธู ุดุฏู ุฏุฑ `.env.local` โ
- **Service Role Key**: ุชูุธู ุดุฏู ุฏุฑ `.env.local` โ

---

## ูฺฉุงุช UI/UX โ

### ุทุฑุงุญ ฺฉู โ
- **ุฒุจุงู**: ูุงุฑุณ โ
- **ุฌูุช**: ุฑุงุณุช ุจู ฺูพ (RTL) โ
- **ูููุช**: Vazirmatn โ
- **ุฑุณูพุงูุณู**: ููุจุงู ู ุฏุณฺฉุชุงูพ โ

### ุฑูฺฏโุจูุฏ โ
- **ุงุตู**: ุขุจ (#3b82f6) โ
- **ุซุงููู**: ุณุจุฒ (#10b981) โ
- **ุฎุงฺฉุณุชุฑ**: ุทู ฺฉุงูู โ
- **ูพุณโุฒููู**: ุณูุฏ/ุฎุงฺฉุณุชุฑ ุฑูุดู โ

---

## ุณุงุฎุชุงุฑ ูพูุดูโูุง โ

```
src/
โโโ app/                    โ
โ   โโโ admin/             โ
โ   โ   โโโ page.tsx       โ (ุฏุงุดุจูุฑุฏ ูุฏุฑ)
โ   โ   โโโ classes/       โ
โ   โ   โ   โโโ page.tsx   โ (ูุฏุฑุช ฺฉูุงุณโูุง)
โ   โ   โโโ subjects/      โ
โ   โ   โ   โโโ page.tsx   โ (ูุฏุฑุช ุฏุฑูุณ)
โ   โ   โโโ students/      โ
โ   โ   โ   โโโ page.tsx   โ (ูุฏุฑุช ุฏุงูุดโุขููุฒุงู)
โ   โ   โโโ grades/        โ
โ   โ       โโโ page.tsx   โ (ุซุจุช ููุฑุงุช)
โ   โโโ parent/            โ
โ   โ   โโโ login/         โ
โ   โ   โ   โโโ page.tsx   โ (ูุฑูุฏ ูุงูุฏ)
โ   โ   โโโ dashboard/     โ
โ   โ       โโโ page.tsx   โ (ุฏุงุดุจูุฑุฏ ูุงูุฏ)
โ   โโโ layout.tsx         โ (RTL Layout)
โ   โโโ page.tsx           โ (ุตูุญู ุงุตู)
โ   โโโ globals.css        โ (ุงุณุชุงูโูุง ฺฉู)
โโโ components/            โ
โ   โโโ AdminLayout.tsx    โ (ูุงูุช ูพูู ูุฏุฑ)
โโโ lib/                   โ
    โโโ supabase.ts        โ (ฺฉูุงูุช Supabase)
    โโโ types.ts           โ (ุชุงูพโูุง TypeScript)
```

---
* ุฏุณุชุฑุณโูุง ุฑุง ุจุง RLS ุฏุฑ Supabase ฺฉูุชุฑู ฺฉูุฏ.
* ุงุฒ `service_role` ููุท ุฏุฑ ุณุฑูุฑ ุงุณุชูุงุฏู ุดูุฏ (ูู ุฏุฑ ูุฑุงูุชโุงูุฏ).

---

## ูุฑููู ูุญุงุณุจู ูุนุฏู โ

### ูุนุฏู ูุงูุงูู โ
```javascript
// ุจุฑุง ูุฑ ุฏุฑุณ ุฏุฑ ูุฑ ูุงู
monthlyAverage = totalScore / numberOfSubjects
```

### ูุนุฏู ฺฉู โ
```javascript
// ูุนุฏู ฺฉู ุณุงู ุชุญุตู
totalAverage = sumOfAllScores / (numberOfSubjects ร numberOfMonths)
```

### ูพุงุฏูโุณุงุฒ ุฏุฑ ฺฉุฏ โ
- ูุญุงุณุจู ูุนุฏู ุฏุฑ ฺฉุงููพูููุช ูุงูุฏ โ
- ููุงุด ูุนุฏู ุฏุฑ ุฌุฏูู ููุฑุงุช โ
- ุฑูฺฏโุจูุฏ ุจุฑ ุงุณุงุณ ูุนุฏู (ูุฑูุฒ < 10ุ ุฒุฑุฏ 10-15ุ ุณุจุฒ > 15) โ

---

## ุฎุฑูุฌ ููุง ูพุฑูฺู โ

### ูพูู ูุฏุฑ โ
- **ุฏุงุดุจูุฑุฏ**: ุขูุงุฑ ฺฉู (ุชุนุฏุงุฏ ฺฉูุงุณโูุงุ ุฏุฑูุณุ ุฏุงูุดโุขููุฒุงู) โ
- **ูุฏุฑุช ฺฉูุงุณโูุง**: ุงูุฒูุฏูุ ูุฑุงุดุ ุญุฐู ฺฉูุงุณโูุง โ
- **ูุฏุฑุช ุฏุฑูุณ**: ุงูุฒูุฏูุ ูุฑุงุดุ ุญุฐู ุฏุฑูุณ โ
- **ูุฏุฑุช ุฏุงูุดโุขููุฒุงู**: ุซุจุช ุฏุงูุดโุขููุฒ ุจุง ุงุฌุงุฏ ุฎูุฏฺฉุงุฑ ูุงูุฏ โ
- **ุซุจุช ููุฑุงุช**: ุซุจุช ููุฑุงุช ูุงูุงูู ุจุง ููุชุฑ ฺฉูุงุณ ู ุฏุฑุณ โ

### ูพูู ูุงูุฏ โ
- **ูุฑูุฏ**: ุจุง ฺฉุฏ ูู ู ุดูุงุฑู ุชููู โ
- **ุฏุงุดุจูุฑุฏ**: ูุดุงูุฏู ููุฑุงุช ูุฑุฒูุฏ ุฏุฑ ุฌุฏูู ูุงูุงูู โ
- **ูุญุงุณุจู ูุนุฏู**: ููุงุด ูุนุฏู ูุงูุงูู ู ฺฉู โ

### ูฺฺฏโูุง ุชฺฉูฺฉ โ
- **RTL**: ูพุดุชุจุงู ฺฉุงูู ุงุฒ ุฑุงุณุช ุจู ฺูพ โ
- **ุฑุณูพุงูุณู**: ุณุงุฒฺฏุงุฑ ุจุง ููุจุงู ู ุฏุณฺฉุชุงูพ โ
- **ุงููุช**: RLS policies ุจุฑุง ูุญุงูุธุช ุงุฒ ุฏุงุฏูโูุง โ
- **ุชุงูพโุงุณฺฉุฑูพุช**: ุชุงูพโูุง ฺฉุงูู ุจุฑุง ููู entities โ
- **ูุฑู validation**: ุงุนุชุจุงุฑุณูุฌ ฺฉุงูู ุจุง Zod โ

---

## ูุถุนุช ูุนู ูพุฑูฺู โ

### ุงูุฌุงู ุดุฏู โ
- [x] **ุฒุฑุณุงุฎุช**: Next.js + TypeScript + TailwindCSS + Supabase โ
- [x] **ุฏุชุงุจุณ**: ุชูุงู ุฌุฏุงูู ู ุฑูุงุจุท ุงุฌุงุฏ ุดุฏู โ
- [x] **ูพูู ูุฏุฑ**: ุชูุงู ุตูุญุงุช CRUD ูพุงุฏูโุณุงุฒ ุดุฏู โ
- [x] **ูพูู ูุงูุฏ**: ูุฑูุฏ ู ุฏุงุดุจูุฑุฏ ฺฉุงูู โ
- [x] **UI/UX**: ุทุฑุงุญ RTL ู ุฑุณูพุงูุณู โ
- [x] **ุงููุช**: RLS policies ุงููู โ

### ุจุงูโูุงูุฏู
- [ ] **ุชุณุช ฺฉุงูู**: ุจุฑุฑุณ ุชูุงู ุนููฺฉุฑุฏูุง
- [ ] **ุจูููโุณุงุฒ**: Performance optimization
- [ ] **Authentication ูุฏุฑ**: ุณุณุชู ูุฑูุฏ ุจุฑุง ูุฏุฑ
- [ ] **ุขูุงุฏูโุณุงุฒ production**: Environment variables ู deployment

**ุฏุฑุตุฏ ูพุดุฑูุช: นฐูช** ๐

---
